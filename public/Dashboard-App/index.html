<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          Post#8 Create and upload a mobile application to App Store and Google Play Store - Quang
        
    </title>

    <link rel="canonical" href="https://decodecraft.com/Dashboard-App/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<body ontouchstart="">
	<!-- Created by Nguyen Nhat Quang -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('header2.jpg')
            /*post*/
        
    }
    
    #signature{
        background-image: url('/undefined');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#javascript" title="javascript">javascript</a>
                            
                              <a class="tag" href="/tags/#nodejs" title="nodejs">nodejs</a>
                            
                              <a class="tag" href="/tags/#api" title="api">api</a>
                            
                              <a class="tag" href="/tags/#react-native" title="react-native">react-native</a>
                            
                              <a class="tag" href="/tags/#expo" title="expo">expo</a>
                            
                        </div>
                        <h1>Post#8 Create and upload a mobile application to App Store and Google Play Store</h1>
                        <h2 class="subheading">30-min read</h2>
                        <span class="meta">
                            Posted by Quang Nguyen on
                            2021-06-20
                        </span>
                    </div>
                
                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Quang Nguyen</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <p>It has been a while since I have written everything. I have some new projects since the winter and I will try to introduce to you guys some of the newest projects I have been working on since the spring semester.</p>
<p>Right after the finals are over, I have the time to create my first mobile application called <strong>Dashboard: Track your training</strong> (Link <a href="here">“https://linktr.ee/quangnguyen14”</a>) and upload it to Appstore and Google Play. It was quite a challenging time and I wanted to share to you some basics on how to do it and some lessons I learned from deploying my application.</p>
<p>Here are the <strong>big parts</strong> that will be covered in this post. Notice that I will try not to go into too much details in this post because it will be super long. Instead, I will walk you through the tips, tricks and lessons I learned by a hard way when I was doing my app. If you want to take a look at the source code, feel free to see it <a href="here">“https://github.com/QuangNg14/Dashboard-App”</a></p>
<ol>
<li>Introductions</li>
<li>Frontend</li>
<li>Explaining the core feature: Location Tracking</li>
<li>Backend</li>
<li>Deploying to Appstore and Google Play Store</li>
</ol>
<h2><span id="introductions">Introductions</span></h2>
<h3><span id="introductions-of-the-app">Introductions of the app</span></h3>
<p><strong>Explaining the name</strong> Dashboard = Dash + board. This name comprises of 2 of the main features of the app. You can <strong>track</strong> your training routes, <strong>pin</strong> your favorite locations and share your selfies to a board (or your <strong>Feed</strong>). It is a free sports management app with a friendly UI design that accurately records your training routes while helping you pin locations at ease and share your achievements with the DASHBOARD network.</p>
<h3><span id="what-technologies-did-i-use">What technologies did I use?</span></h3>
<ol>
<li>
<p><strong>Expo React Native</strong>. The front end of the app is built based on Expo React Native. It is really convenient and handy in handling the libraries. However, 1 downside is that we cannot control the native files and rely entirely on expo</p>
</li>
<li>
<p><strong>Google Map API</strong>. One of the location features used Google Map API</p>
</li>
<li>
<p><strong>Expo Location</strong>. This is the main library used for building the location tracking function</p>
</li>
<li>
<p><strong>Cloudinary</strong>. This is used to store images uploaded to the app</p>
</li>
<li>
<p><strong>MongoDB and Express</strong>. This is the combo for backend that I usually use to build fullstack apps</p>
</li>
<li>
<p><strong>Google App engine</strong>. This is where I host my server</p>
</li>
</ol>
<h2><span id="frontend">Frontend</span></h2>
<p>Now we will be entering the main part <strong>building</strong> the actual app. Here are the components of our app. I will split into 2 parts: <strong>the Side Screens</strong> and the <strong>core feature</strong> Location Tracking</p>
<h3><span id="side-screens">Side Screens</span></h3>
<ol>
<li>Explaining Navigation v5 of React Native</li>
<li>Building Welcome and Authentication Screens</li>
<li>Building Account Screen</li>
</ol>
<h4><span id="explaining-navigation-v5-of-react-native">Explaining Navigation v5 of React Native</span></h4>
<p>The core of every app is navigation. In the newest version of react navigation v5, there has been a lot of changes to the navigation. Below is the map of our navigation. As you can see, we start from the <strong>welcome screen</strong> and the <strong>login/signup screen</strong> if we are not authenticated. The login and signup screen will be a <strong>stack navigator</strong> to move back and forth.</p>
<p>We will do a quick check to see if the user is authenticated. If they are not, they will be in the login, signup screen. If they are, they will be navigated to the <strong>Main screen</strong>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;authState.userToken != <span class="literal">null</span> ? (</span><br><span class="line">    <span class="comment">// &lt;HomeTabScreen/&gt;</span></span><br><span class="line">        &lt;Drawer.Navigator</span><br><span class="line">            initialRouteName=<span class="string">"TrackCreate"</span></span><br><span class="line">            drawerContent=&#123;props =&gt; &lt;DrawerContainer &#123;...props&#125; /&gt;&#125;&gt;</span><br><span class="line">            &lt;Drawer.Screen name=<span class="string">"TrackCreate"</span> component=&#123;HomeTabScreen&#125; /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Drawer.Navigator&gt;</span></span><br><span class="line"><span class="regexp">    ) : (</span></span><br><span class="line"><span class="regexp">    &lt;AuthStackScreen /</span>&gt;</span><br><span class="line">)&#125;</span><br></pre></td></tr></table></figure>
<img src="/Dashboard-App/navigator.png">
<p>In the main screen, there will be a <strong>bottom tab navigator</strong>. This will help us navigate between 4 screens: Track Create, Track List, Feed and Account.</p>
<ol>
<li><strong>Track Create</strong>: after we finished recording a track, we will move to <strong>Track Custom Screen</strong> so we will need a stack navigator for these 2 screens</li>
<li><strong>Track List</strong>: after we clicked on a track on the track list, we will move to the track details. Thus, we will also need a stack navigator for these 2 screens.</li>
<li><strong>Feed and Account</strong> Screens stand by their own so we just need to add them to the Bottom Tab Navigator</li>
</ol>
<h5><span id="quick-tip-how-to-customize-the-screen-header">Quick Tip: How to customize the screen header</span></h5>
<p>You <strong>HAVE</strong> to transform your screen into a stack screen by itself to customize the screen header.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;HomeTab.Screen</span><br><span class="line">  name=<span class="string">"Feed"</span></span><br><span class="line">  component=&#123;FeedCreateStackScreen&#125;</span><br><span class="line">  options=&#123;&#123;</span><br><span class="line">    title: <span class="string">"Feed"</span></span><br><span class="line">  &#125;&#125; /&gt;</span><br></pre></td></tr></table></figure>
<p>Here I created the FeedCreateStackScreen for my Feed Screen to be able to customize my screen title.</p>
<h4><span id="building-welcome-and-loginsignup-screen">Building Welcome and Login/Signup Screen</span></h4>
<p>Here is a look of the Login/Signup Screen:</p>
<img src="/Dashboard-App/signup.png">
<p><strong>Notice</strong><br>
These screens have basic functions to authenticate. I have already written a post about authenticating using JWT token <a href="here">“http://localhost:4000/MessengerClone/”</a>. However, we need to make sure that will use <strong>SafeAreaView and ScrollView</strong> to make it scrollable when the keyboard is opened (so that the keyboard doesnt cover the inputs)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;SafeAreaView style=&#123;styles.container&#125;&gt;</span><br><span class="line">    &lt;View&gt;</span><br><span class="line">        &lt;ScrollView</span><br><span class="line">            showsVerticalScrollIndicator=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">        &gt;</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>
<h4><span id="building-account-screen">Building Account Screen</span></h4>
<p>This is where the users can customize their profile. This screen has some basic features like changing avatar and viewing the personal information.</p>
<p>Here it gets to a point where you will need to ask the users for <strong>permission</strong> to access their photos and cameras. This is the first permission we will need and luckily, we have <strong>expo-image-picker</strong> and <strong>expo-camera</strong> to help us. Below is how we usually request for permission to access the <strong>media library</strong> (photos) from the user in Expo.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  (<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (Platform.OS !== <span class="string">'web'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; status &#125; = <span class="keyword">await</span> ImagePicker.requestMediaLibraryPermissionsAsync();</span><br><span class="line">      <span class="keyword">if</span> (status !== <span class="string">'granted'</span>) &#123;</span><br><span class="line">        alert(<span class="string">'Sorry, we need camera roll permissions to make this work!'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>
<p><strong>Notes</strong> we should set the quality to 0.1 or lower to reduce the loading time for our app. We should also set the <strong>base64</strong> equal to true to <strong>store</strong> the image later</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pickImage = <span class="keyword">async</span> () =&gt; &#123;    </span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> ImagePicker.launchImageLibraryAsync(&#123;</span><br><span class="line">    mediaTypes: ImagePicker.MediaTypeOptions.All,</span><br><span class="line">    allowsEditing: <span class="literal">true</span>,</span><br><span class="line">    aspect: [<span class="number">4</span>, <span class="number">3</span>],</span><br><span class="line">    quality: <span class="number">0.1</span>,</span><br><span class="line">    base64: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (result.cancelled) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>There are many ways to store your images but I choose to use <strong>Cloudinary</strong> because their free package is really nice. What Cloudinary does is that it will create an image based on your <strong>base64</strong> link and <strong>upload</strong> that to their storage. After that, you can save your <strong>profile image link</strong> to your database and get it down whenever you want.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> base64Img = <span class="string">`data:image/jpg;base64,<span class="subst">$&#123;result.base64&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">  <span class="string">"file"</span>: base64Img,</span><br><span class="line">  <span class="string">"upload_preset"</span>: <span class="string">"iqtz1hm2"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">await</span> fetch(CLOUDINARY_URL, &#123;</span><br><span class="line">  body: <span class="built_in">JSON</span>.stringify(data),</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="string">'content-type'</span>: <span class="string">'application/json'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<img src="/Dashboard-App/8.avatar.png">
<h2><span id="explaining-the-core-feature-location-tracking">Explaining the core feature: Location Tracking</span></h2>
<p>This is probably the most important feature of the app. Location Tracking is pretty complicated and I will break it down for you in some parts</p>
<ol>
<li>Updating time continuously</li>
<li>Create a Track reducer to handle recording new tracks</li>
<li>Foreground Location</li>
<li>Background Location</li>
<li>Displaying it on a Map</li>
<li>Customize a Track after saving</li>
<li>Posting it to Feed</li>
</ol>
<h3><span id="updating-time-continuously">Updating time continuously</span></h3>
<p>This is probably the easiest part. As you can see in most tracking app, there is a clock running <strong>continuously</strong>. I did this by having 3 <strong>states</strong>: hour, minute and second. When we start recording, we will increase second by 1 (every second) by using a <strong>setInterval</strong> function along with a <strong>useEffect</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> interval = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> setSecond(second + <span class="number">1</span>), <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>Then, if the second state is &gt;= 60, it will be <strong>resetted</strong> to 0 and the minute state will be increased by 1. Similarly, if the minute state is &gt;= 60, it will be <strong>resetted</strong> to 0 and the hour state will be increased by 1.</p>
<h3><span id="create-a-location-context-to-handle-recording-new-tracks">Create a Location context to handle recording new tracks</span></h3>
<p>This is where we handle all the functions that are related to handling recodring the Locations. This can include <strong>startRecording, stopRecording, and addLocation</strong>. These are 3 things that are most important to the app. Everytime the user clicks Record, we will change the state to startRecording. Similarly, if they click Cancel, we will cancel recording.</p>
<p><strong>Important Notes</strong> When we are recording locations, we will add a new location (this is a combination of longitude, latitude, currentSpeed, accuracy level, …) every second to our state using the <strong>addLocation</strong> function.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> addLocation = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">location, isRecording, speedLst</span>) =&gt;</span> &#123;</span><br><span class="line">        dispatch(&#123;<span class="attr">type</span>: <span class="string">"add_current_location"</span>, <span class="attr">payload</span>: location&#125;)</span><br><span class="line">    <span class="keyword">if</span>(isRecording)&#123;</span><br><span class="line">        dispatch(&#123;<span class="attr">type</span>: <span class="string">"add_location"</span>, <span class="attr">payload</span>: location&#125;)</span><br><span class="line">        dispatch(&#123;<span class="attr">type</span>: <span class="string">"add_speed"</span>, <span class="attr">payload</span>: location.coords.speed * <span class="number">3.6</span>&#125;)</span><br><span class="line">        dispatch(&#123;<span class="attr">type</span>: <span class="string">"add_current_speed"</span>, <span class="attr">payload</span>: location.coords.speed * <span class="number">3.6</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This is how the recording look like:</p>
<img src="/Dashboard-App/3.record.png">
<h3><span id="foreground-location">Foreground Location</span></h3>
<p>Foreground location means that recording the location while <strong>your phone is opened and you are opening the app</strong>. This might not be too useful for an app that tracks your location while you are training because when you are cycling or running, you might <strong>lock</strong> your phone or <strong>turn it off</strong>. However, we will still have to include this.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startWatching = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; granted &#125; = <span class="keyword">await</span> requestPermissionsAsync();</span><br><span class="line">        <span class="keyword">if</span> (!granted) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Location permission not granted'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        subscriber = <span class="keyword">await</span> watchPositionAsync(</span><br><span class="line">            &#123;</span><br><span class="line">                accuracy: Accuracy.BestForNavigation,</span><br><span class="line">                timeInterval: <span class="number">3000</span>,</span><br><span class="line">                distanceInterval: <span class="number">30</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            callback</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>
<p>Here we will use a function that was given to us by the expo library. This is the <strong>watchPositionAsync</strong>. It will basically record your location every 3 seconds or you have travelled 30 meters. Therefore, the recording might be a bit <strong>inaccurate</strong> when you barely moved or sit still. Make sure that you must <strong>ASK FOR THE USER PERMISSION</strong> to use Foreground location</p>
<h3><span id="background-location">Background Location</span></h3>
<p>Background location means that recording the location while <strong>your phone is not opened or your screen is locked</strong>. This is the most complicated part of this app and it took me days to set up. This is because both IOS and Android have very strict protocols for asking background locations.</p>
<p>When we are using background location, we will need to <strong>ASK FOR USER PERMISSION</strong> again but this time when you switch the app to the background it will prompt something like either <strong>allow using location while using the app</strong> or <strong>always allow using location</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startLocationTracking = React.useCallback(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="keyword">await</span> Permissions.askAsync(Permissions.LOCATION);</span><br><span class="line">  <span class="keyword">if</span> (res.status !== <span class="string">'granted'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Permission to access location was denied'</span>);</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">await</span> Location.startLocationUpdatesAsync(LOCATION_TRACKING, &#123;</span><br><span class="line">    accuracy: Location.Accuracy.BestForNavigation,</span><br><span class="line">    timeInterval: <span class="number">3000</span>, <span class="comment">//update every second</span></span><br><span class="line">    distanceInterval: <span class="number">50</span>, <span class="comment">//update every 10 meters,</span></span><br><span class="line">    foregroundService: &#123;</span><br><span class="line">      notificationTitle: <span class="string">'Using your location'</span>,</span><br><span class="line">      notificationBody: <span class="string">'To turn off, go back to the app and switch something off.'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    pausesUpdatesAutomatically: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>For the background location, we will use the <strong>startLocationUpdatesAsync</strong> from expo library. This will track the location every 3 seconds or you have travelled 50 meters.</p>
<p><strong>Notes 1</strong>: For Android, you will need to have a <strong>modal</strong> or a <strong>pop-up</strong> to explain why you want to use the users’ background location<br>
<strong>Notes 2</strong>: For Android, your app will need to have permission from Google Review to be able to see the background location functions<br>
<strong>Notes 3</strong>: For IOS, the pop up to ask for background location will be quite slow so in the first few tries it might not be up.</p>
<p>There will be a lot more <strong>notes and tricks</strong> on background location in the parts later when we try to <strong>deploy</strong> it to App Store and Google Play Store</p>
<h3><span id="displaying-it-on-a-map">Displaying it on a Map</span></h3>
<p>This is quite easy since we can take advantage of the react native maps. We can use the MapView component to display a map in both IOS maps and Google maps.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;MapView</span><br><span class="line">  style=&#123;&#123; <span class="attr">height</span>: isRecording ? <span class="string">"50%"</span> : <span class="string">"80%"</span>, <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125;</span><br><span class="line">  region=&#123;currentLocation &amp;&amp; &#123;</span><br><span class="line">    ...currentLocation.coords,</span><br><span class="line">    latitudeDelta: <span class="number">0.005</span>,</span><br><span class="line">    longitudeDelta: <span class="number">0.005</span>,</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  showsUserLocation=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">  followsUserLocation=&#123;followsUserLocation&#125;</span><br></pre></td></tr></table></figure>
<p>Then we will use a <strong>Polyline Component</strong> also from react native maps to display our tracks on the screen. The locations variable here is our <strong>locations</strong> state. This is an array of small <strong>Location</strong> objects (with latitude, longitude, accuracy, …) which I have explained above.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;PolylineComponent locations=&#123;locations&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>This is the screen where we are drawing the tracks on the map.</p>
<img src="/Dashboard-App/3.record.png">
<h3><span id="pin-a-location">Pin a location</span></h3>
<p>This is the <strong>innovative</strong> part of the app when compare to other apps. When we travelled to a new place, you can pin the current location and the app will display immediately the current address to the screen. This uses <strong>Google Maps API</strong> to get the most accurate current address.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reverseGeocodeAPI = <span class="keyword">async</span> (latlng) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> res = <span class="keyword">await</span> axios.get(<span class="string">`<span class="subst">$&#123;BASE_URL&#125;</span>?latlng=<span class="subst">$&#123;latlng&#125;</span>&amp;key=<span class="subst">$&#123;API_KEY&#125;</span>`</span>)</span><br><span class="line"><span class="keyword">return</span> res.data.results[<span class="number">0</span>].formatted_address</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Specifically, we use the <strong>reverseGeocode</strong> API to achieve this functionality. In order to set up and use Google Maps API, you will first need a <strong>Google API key</strong>.</p>
<ol>
<li>Go to Google Cloud Console and create 2 new API keys at the Credentials page: 1 for IOS and 1 for Android</li>
</ol>
<img src="/Dashboard-App/apikey.png">
<ol start="2">
<li>Restrict 1 key to Android App and the other to IOS app</li>
</ol>
<img src="/Dashboard-App/restrictkey.png">
<ol start="3">
<li>Enable the Google Maps SDK for both IOS and Android in the market page</li>
</ol>
<img src="/Dashboard-App/market.png">
<p>Now you have successfully set up the API keys and are ready to call the Google APIs</p>
<h3><span id="customize-a-track-after-saving">Customize a Track after saving</span></h3>
<p>This is basically adding some information for the track before saving it, you can add name, type, descriptions and an <strong>image</strong> of your track. In order to upload image here, we once again need to <strong>ask for the users permission</strong> to access the media library and have to upload to <strong>Cloudinary</strong></p>
<p><strong>Notice</strong>: because there will be a lot of inputs in this screen and you dont want the keyboard to <strong>cover</strong> your inputs, make sure to use <strong>KeyboardAvoidingView</strong> for IOS:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;Platform.OS === <span class="string">"ios"</span> ? (</span><br><span class="line">  &lt;KeyboardAvoidingView style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125; behavior=<span class="string">"padding"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>And do this for Android:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;KeyboardAvoidingView keyboardVerticalOffset=&#123;<span class="number">-1000</span>&#125; style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span> &#125;&#125;&gt;</span><br></pre></td></tr></table></figure>
<h3><span id="posting-it-to-feed">Posting it to Feed</span></h3>
<p>The Feed screen is basically a <strong>social media screen</strong> where it will list out all the current posts and each post will have avatar, name, descriptions, image and <strong>like, comment and share</strong> sections like a normal Facebook post.</p>
<p>This can be done by getting all the posts from the database and display it to the screen</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  fetchPosts()</span><br><span class="line">&#125;, [isFocused])</span><br><span class="line"></span><br><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (state) &#123;</span><br><span class="line">    setSortedState(state.slice().sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.createdAt - a.createdAt))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [state])</span><br></pre></td></tr></table></figure>
<p>What I do in the second useEffect is that I sort the post in the order that <strong>newest</strong> posts are on top. I will explain more about the schema of each post and comment and like cause it will be quite <strong>complicated</strong></p>
<h2><span id="backend">Backend</span></h2>
<h3><span id="setting-up-express-and-some-libraries">Setting up Express and some libraries</span></h3>
<p>In Express, we used some standard libraries such as express, bodyParser and mongoose (for handle MongoDB). To connect to MongoDB, I have already written a blog <a href="here">“http://localhost:4000/Doctorally/”</a>. You guys can check it out.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>)</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">"mongoose"</span>)</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>)</span><br></pre></td></tr></table></figure>
<p><strong>Notice that</strong>, we use this config to extend our request data size:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.urlencoded(&#123;</span><br><span class="line">    limit: <span class="string">'50mb'</span>,</span><br><span class="line">    parameterLimit: <span class="number">100000</span>,</span><br><span class="line">    extended: <span class="literal">true</span> </span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<h3><span id="explaining-the-routes">Explaining the routes</span></h3>
<p>There are 3 types of routes:</p>
<ol>
<li><strong>Authentication</strong> Routes. This is the authentication router using JWT Token. It is really common and I will not mention it in details here</li>
<li><strong>Track</strong> Routes. These are the routers that you will use to save your track details to MongoDB</li>
</ol>
<p>This is an example of how to use the track routes to find <strong>all</strong> tracks of a user</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">"/tracks"</span>, requireAuth, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> tracks = <span class="keyword">await</span> Track.find(&#123;<span class="attr">userId</span>: req.user._id&#125;)</span><br><span class="line">    res.send(tracks)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>Posts</strong> Routes. These are the routers to control the posts that are posted to the Feed. Below is an example of how to get a post with a <strong>specified id</strong>:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">"/posts/:id"</span>, requireAuth, <span class="keyword">async</span> (req, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> id = req.params.id</span><br><span class="line">    <span class="keyword">const</span> query = &#123;<span class="attr">_id</span>: id&#125;</span><br><span class="line">    <span class="keyword">const</span> post = <span class="keyword">await</span> Post.findOne(query)</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        res.send(post)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>(err)&#123;</span><br><span class="line">        <span class="keyword">return</span> res.status(<span class="number">422</span>).send(&#123;<span class="attr">error</span>: err.message&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3><span id="explaining-mongodb-schema">Explaining MongoDB Schema</span></h3>
<p>In this part, I will explain in detail the schemas of each type of routes.</p>
<h4><span id="the-user-schema">The user schema:</span></h4>
<p>The user schema consists of <strong>information</strong> like: email, password (encrypted), firstName, lastName, age, gender, image (link to avatar image)</p>
<p><strong>Note 1</strong>: we can set the image (avatar link) of a default image before the users change their avatar<br>
<strong>Note 2</strong>: In the user model, we will add a method to help comparePassword so that when we login, the password will be compared with the <strong>encrypted</strong> password saved in the database</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">userSchema.methods.comparePassword = <span class="function"><span class="keyword">function</span>(<span class="params">candidatePassword</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    bcrypt.compare(candidatePassword, user.password, (err, isMatch) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(err);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!isMatch) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      resolve(<span class="literal">true</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4><span id="the-track-schema">The Track Schema</span></h4>
<p>Here we need to understand the detailed information of each location that we saved. Each location we saved will be a <strong>POINT</strong> schema with information like current latitude, longitude, altitude, accuracy, …</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pointSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    timestamp: <span class="built_in">Number</span>,</span><br><span class="line">    coords:&#123;</span><br><span class="line">        latitude: <span class="built_in">Number</span>,</span><br><span class="line">        longitude: <span class="built_in">Number</span>,</span><br><span class="line">        altitude: <span class="built_in">Number</span>,</span><br><span class="line">        accuracy: <span class="built_in">Number</span>,</span><br><span class="line">        heading: <span class="built_in">Number</span>,</span><br><span class="line">        speed: <span class="built_in">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Therefore, each track will be an <strong>list</strong> of consecutive <strong>points</strong> so a track schema will look like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trackSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    userId:&#123;</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId, </span><br><span class="line">        ref: <span class="string">'User'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    locations: [pointSchema],</span><br></pre></td></tr></table></figure>
<p>Notice that we will also need a <strong>userId</strong> in each track. This will be a <strong>reference</strong> to the user table. This will help us keep track of whose track is this.</p>
<h3><span id="the-post-schema">The Post Schema</span></h3>
<p>Each post will contain likes, comments, and a map of the track we saved. Therefore, we need <strong>userId</strong> as a reference of the user table to know whose post is this. We also need <strong>trackId</strong> as a reference of the track table to know what track is this. Lastly, we need the <strong>likes</strong> and <strong>comments</strong> schema to be lists of likeSchemas and commentSchemas.</p>
<p>These are the likeSchema and commentSchema</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> commentSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    userId:&#123;</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId,</span><br><span class="line">        ref: <span class="string">'User'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    username: <span class="built_in">String</span>,</span><br><span class="line">    text: <span class="built_in">String</span>,</span><br><span class="line">    avatar: <span class="built_in">String</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> likeSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    userId:&#123;</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId, </span><br><span class="line">        ref: <span class="string">'User'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    username:<span class="built_in">String</span>,</span><br><span class="line">    avatar: <span class="built_in">String</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> postSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">    userId:&#123;</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId, </span><br><span class="line">        ref: <span class="string">'User'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    trackId:&#123;</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId, </span><br><span class="line">        ref: <span class="string">'Track'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    likes: &#123;</span><br><span class="line">        type: [likeSchema],</span><br><span class="line">        <span class="keyword">default</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    comments: &#123;</span><br><span class="line">        type: [commentSchema],</span><br><span class="line">        <span class="keyword">default</span>: []</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>
<p>This is basically how we create the <strong>postSchema</strong>.</p>
<h3><span id="host-server-on-google-app-engine">Host server on Google App Engine</span></h3>
<p>In order to run your server on all machines, we need to host our server somewhere but I chose <strong>Google App Engine</strong>. You can use whatever service you like. Here is the quick recap of the steps that is in [“<a href="https://cloud.google.com/appengine/docs/standard/nodejs/quickstart" target="_blank" rel="noopener">https://cloud.google.com/appengine/docs/standard/nodejs/quickstart</a>”](this official tutorial)</p>
<ol>
<li>Create an app on Google Cloud Console</li>
</ol>
<img src="/Dashboard-App/newapp.png">
<ol start="2">
<li>Register for the Google App Engine service to that app. Make sure to choose the region that is close to you</li>
</ol>
<img src="/Dashboard-App/newapp2.png">
<ol start="3">
<li>
<p>Make sure that billing is enabled for your Cloud project (just use the trial version)</p>
</li>
<li>
<p>Enable Cloud build API in the Market</p>
</li>
</ol>
<img src="/Dashboard-App/newapp3.png">
<ol start="5">
<li><strong>IMPORTANT</strong>: In your server folder, go to package.json and change the <strong>“main” key</strong> to “server.js”. This is because google app engine only takes server.js as the main file.</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"track-server"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"server.js"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"@expo/ngrok"</span>: <span class="string">"^2.4.3"</span>,</span><br><span class="line">    <span class="string">"aws-sdk"</span>: <span class="string">"^2.905.0"</span>,</span><br><span class="line">    <span class="string">"bcrypt"</span>: <span class="string">"^5.0.0"</span>,</span><br><span class="line">    <span class="string">"body-parser"</span>: <span class="string">"^1.19.0"</span>,</span><br><span class="line">    <span class="string">"express"</span>: <span class="string">"^4.17.1"</span>,</span><br><span class="line">    <span class="string">"jsonwebtoken"</span>: <span class="string">"^8.5.1"</span>,</span><br><span class="line">    <span class="string">"mongoose"</span>: <span class="string">"^5.11.16"</span>,</span><br><span class="line">    <span class="string">"multer"</span>: <span class="string">"^1.4.2"</span>,</span><br><span class="line">    <span class="string">"nodemon"</span>: <span class="string">"^2.0.7"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>
<p>Change the name of your main file (in the directory) from <strong>index.js -&gt; server.js</strong>. Make sure to change all imports if necessary.</p>
</li>
<li>
<p>Run gcloud app deploy and click yes if prompted</p>
</li>
<li>
<p>After finished uploading, you are done. You can always check the logs if there is any error on the google cloud console -&gt; Logs</p>
</li>
</ol>
<img src="/Dashboard-App/newapp4.png">
<h2><span id="testing-and-deploying-to-app-store-and-google-play-store">Testing and Deploying to App Store and Google Play Store</span></h2>
<p>This is the most exhausting and frustrating part but you have to go through this the first time. It actually took me <strong>more time</strong> to deploy to 2 stores than doing code.</p>
<h3><span id="deploying-an-expo-app-to-app-store">Deploying an Expo App to App Store</span></h3>
<p>I will walk you through the very <strong>detailed</strong> steps from beginning to seeing your app on <strong>App Store</strong></p>
<ol>
<li>Setting up app.json file</li>
<li>Testing your app on Simulator and Custom Expo Go</li>
<li>Build the app for IOS using the archive</li>
<li>Register for Apple Development Program through Apple Developer App</li>
<li>Create an app on App Store Connect</li>
<li>Prepare screenshots and video records of your Application</li>
<li>Test your app on TestFlight</li>
<li>Submit your app for review and wait for approval</li>
</ol>
<h4><span id="setting-up-appjson-file">Setting up app.json file</span></h4>
<p><strong>Versions and Build Number</strong>: This is the file that all expo projects have. You will need to handle <strong>versioning</strong> and <strong>buildNumber</strong>. These seem difficult at first but it is actually really easy. Everytime you make changes and create a new build, you will increment your <strong>build number</strong> like from 1.1.5 -&gt; 1.1.6. And everytime, you have a huge change or you want to update a version that is on the App Store already, you will need to <strong>increase the version</strong> like from 1.1.0 -&gt; 1.2.0</p>
<p><strong>Icon Image</strong> Here, you can set up your splash screen image (loading screen) or your customized icon.</p>
<p><strong>ios file</strong>. This is the most important file for IOS App as you can see from the name. In here, you will need to add the <strong>PERMISSIONS YOU ASK FROM THE USERS</strong> in the <strong>infoPlist</strong> key. Since my app is using background location, foreground location, media library and camera, all of these <strong>configurations</strong> are required:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">"infoPlist": &#123;</span><br><span class="line">  "NSCameraUsageDescription": "Allow Dashboard to ...",</span><br><span class="line">  "NSLocationWhenInUseUsageDescription": "Allow Dashboard to ...", </span><br><span class="line">  "NSLocationAlwaysUsageDescription": "Allow Dashboard to ...",</span><br><span class="line">  "NSLocationAlwaysAndWhenInUseUsageDescription": "Allow Dashboard to ...",</span><br><span class="line">  "NSPhotoLibraryUsageDescription": "Give Dashboard permission to ...",</span><br><span class="line">  "UIBackgroundModes": [</span><br><span class="line">    "location",</span><br><span class="line">    <span class="string">"fetch"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>In the string value, you must provide a <strong>detailed</strong> description of how you want to use the features you ask from the users. For example, “Allow Dashboard to access media library to upload avatar images”. You should also add a config of your API key like this if you are using Google Maps.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"config":&#123;</span><br><span class="line">"googleMapsApiKey": "your api key"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="testing-your-app-on-simulator-and-custom-expo-go">Testing your app on Simulator and Custom Expo Go</span></h4>
<p>Usually when builing your app, you would have already tested with some kind of simulators. To test an IOS App, it would be best to use <strong>Xcode Simulator</strong>. You can open Xcode and open the <strong>simulator</strong> from choose from navigation bar Window -&gt; Devices and Simulator. Remember that you can choose any type of Iphone you want to simulate. You will need multiple Iphones for taking the screenshots later.</p>
<p>Another way to more accurately test it with Iphone is using the Custom Expo Go. You should consider following the instructions <a href="here">“https://docs.expo.io/guides/adhoc-builds/”</a></p>
<h4><span id="build-the-app-for-ios-using-the-archive">Build the app for IOS using the archive</span></h4>
<p>You need to build the iOS bundle that actually packages the code of your app. This is then deployed somewhere on the Expo servers. In order to do this run the code below. Detailed Instructions are at <a href="here">“https://docs.expo.io/distribution/building-standalone-apps/”</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expo build:ios -t archive</span><br></pre></td></tr></table></figure>
<p>This will initiate the build and you will wait for Expo to build your code to an ios package. When it is done, it will give you a link where you can download your an <strong>.ipa</strong> file then encompasses your code. <strong>KEEP THIS .IPA FILE</strong> this is basically your whole app.</p>
<h4><span id="register-for-apple-development-program-through-apple-developer-app">Register for Apple Development Program through Apple Developer App</span></h4>
<p>You will need to sign up for the Apple Developer Program:</p>
<ol>
<li>Go to <a href="https://developer.apple.com/programs/" target="_blank" rel="noopener">https://developer.apple.com/programs/</a> and sign in with your Apple ID</li>
<li>Click on Enroll</li>
<li>Fill out the information and pay the $99 fee</li>
<li>Wait for 1-2 days for your order to be processed</li>
</ol>
<p>or you can download the Apple Developer app from App Store to your <strong>PHONE</strong>. And register for the Apple Developer Program from the Account Tab. <strong>Notice</strong> that the $99 will be deducted from your current logged in <strong>Apple ID</strong></p>
<h4><span id="create-an-app-on-app-store-connect">Create an app on App Store Connect</span></h4>
<p>Go to <a href="https://appstoreconnect.apple.com" target="_blank" rel="noopener">https://appstoreconnect.apple.com</a> after you have successfully signed up for the Apple Developer Program and sign in to your Apple ID</p>
<p>Create a new app like in here:</p>
<img src="/Dashboard-App/newapple.png">
<p><strong>Notice</strong>: THERE WILL BE AN ERROR HERE in the <strong>bundle id</strong>. The bundle id will be generated by the name and you will take that bundle ID and copy it into your app.json bundleId in IOS. However, it will not be activated right away you will get back into appstoreconnect and select from the dropdown and you will see your bundleId generated</p>
<h4><span id="prepare-screenshots-and-video-records-of-your-application">Prepare screenshots and video records of your Application</span></h4>
<p>Preparing <strong>screenshots</strong> of your Application in 6.5 inch phones (1242 × 2688px) and 5.5 inch phones (1242 x 2208px). It would be best to use the Simulator and take the <strong>video recordings</strong> and screenshots from their. You will also need screenshots of your app in tablets 2nd and 3rd generations as well but it is okay if you use the 4th or the 5th generation in your Simulator</p>
<h4><span id="test-your-app-on-testflight">Test your app on TestFlight</span></h4>
<p>Download the app Transporter from App Store to your Mac. Link <a href="here">“https://apps.apple.com/us/app/transporter/id1450874784?mt=12”</a></p>
<p>Remember the <strong>.ipa</strong> file that I told you to save. This <strong>.ipa</strong> file is really important. You can now drop the .ipa file into your transporter app and it will upload automatically to TestFlight on App Store Connect. <strong>REMEMBER</strong>, you will need a different build version for each upload. You <strong>CANNOT</strong> have 2 builds that have the same versions and the same build number.</p>
<p>You can see the details in these 2 pictures below:</p>
<img src="/Dashboard-App/newapple2.png">
<img src="/Dashboard-App/newapple3.png">
<h4><span id="submit-your-app-for-review-and-wait-for-approval">Submit your app for review and wait for approval</span></h4>
<p>When you have finished all the steps above, your app is ready to submit for review. It will take from 24-48 hours to complete. <strong>Notice</strong> that Apple will extensively check and test out your app. Therefore, you should make sure that your app follows these rules so that it will not be rejected by Apple. The link is <a href="%22https://developer.apple.com/app-store/review/%22">here</a></p>
<h3><span id="deploying-an-expo-app-to-google-play-store">Deploying an Expo App to Google Play Store</span></h3>
<ol>
<li>Setting up app.json file</li>
<li>Testing your app on Android Emulator</li>
<li>Build the .apk or .aab file for Android</li>
<li>Register for Google Play Developer</li>
<li>Create an app on Google Play</li>
<li>Prepare screenshots and images of your Application</li>
<li>Push your app through the testing stages and wait for review</li>
</ol>
<h4><span id="setting-up-appjson-file">Setting up app.json file</span></h4>
<p>The app.json file is quite similar to ios. You will control your version like the build number from IOS using the <strong>versionCode</strong>. <strong>YOU HAVE TO SET YOUR API KEY</strong> if you are using google maps:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"config":&#123;</span><br><span class="line">  "googleMaps":&#123;</span><br><span class="line">    "apiKey": "your api key"</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>android file</strong>. This is the most important file for Android App. In here, you will need to add the <strong>PERMISSIONS YOU ASK FROM THE USERS</strong> in the <strong>permissions</strong> key. Since my app is using background location, foreground location, media library and camera, all of these <strong>configurations</strong> are required. More info on setting up the file can be found <a href="%22https://docs.expo.io/versions/v41.0.0/config/app/#apikey-2%22">here</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">"permissions": [</span><br><span class="line">  "CAMERA",</span><br><span class="line">  "ACCESS_COARSE_LOCATION",</span><br><span class="line">  "ACCESS_FINE_LOCATION",</span><br><span class="line">  "READ_EXTERNAL_STORAGE",</span><br><span class="line">  "WRITE_EXTERNAL_STORAGE",</span><br><span class="line">  "ACCESS_BACKGROUND_LOCATION",</span><br><span class="line">  <span class="string">"FOREGROUND_SERVICE"</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h4><span id="testing-your-app-on-android-emulator">Testing your app on Android Emulator</span></h4>
<p>You should download the Android Studio (link: “<a href="https://developer.android.com/studio" target="_blank" rel="noopener">https://developer.android.com/studio</a>”) and use the <strong>Android Emulator</strong> in the AVD Manager. If you are using a Mac M1, you should consider using the Preview version 3 of the Android Emulator <a href="%22https://github.com/741g/android-emulator-m1-preview/releases%22">here</a></p>
<p>You can also use an Android Phone and Download <strong>Expo Go</strong>. Then you can test your app like you did in the building stage</p>
<h4><span id="register-for-google-play-developer">Register for Google Play Developer</span></h4>
<ol>
<li>Go to <a href="https://play.google.com/console" target="_blank" rel="noopener">https://play.google.com/console</a></li>
<li>Register for the Google Play Developer using a Google Account</li>
<li>Pay the $25 fee for the Program</li>
<li>Upload your National Citizen ID to help Google verify</li>
</ol>
<h4><span id="build-the-apk-or-aab-file-for-android">Build the .apk or .aab file for Android</span></h4>
<p>After that, you can start the Expo build just like for IOS. When building for android you can choose to build APK (<strong>expo build:android -t apk</strong>) or Android App Bundle (<strong>expo build:android -t app-bundle</strong>). It is recommended that you use the App Bundle command. <strong>KEEP THIS .APK OR .AAB file</strong></p>
<p>Then, go to your Google Play Console at <a href="https://play.google.com/console" target="_blank" rel="noopener">https://play.google.com/console</a>. Create a new app with the same <strong>bundle id</strong> as your ios app.</p>
<h4><span id="testing-in-google-play-console">Testing in Google Play Console</span></h4>
<p>There are some <strong>stages</strong> of testing in Google Play Console that you might find trouble understanding. You dont need to go through all the stages of testing even though you are recommended</p>
<p>There are 6 stages (as I understand): Pre-registration -&gt; Internal Testing -&gt; Closed Testing -&gt; Open Testing -&gt; Production -&gt; Release.</p>
<p>What you can do to test is that you will <strong>DROP or UPLOAD</strong> your .aab or .apk<br>
file that was generated before into the Google Play Console. This will create a release of your app. You can <strong>PROMOTE</strong> your release in the order of the 6 stages above. For example, you can <strong>promote</strong> internal testing to open testing<br>
Usually, I would just do Closed Testing and then Production.</p>
<ol>
<li>Pre-registration: Check your app to see which devices it is suitable</li>
<li>Internal and Closed Testing: Add some testers by email and send them a link to test out your app.</li>
</ol>
<img src="/Dashboard-App/google.png">
<ol start="3">
<li>Open Testing: Your app is basically up in the store for users from the countries you selected to join in and test</li>
<li>Production and Release: Final stages before your app is reviewed and released</li>
</ol>
<h4><span id="prepare-screenshots-and-images-of-your-application">Prepare screenshots and images of your Application</span></h4>
<p>You will need screenshots from an android device. You can just take the screenshots from your Emulator. You will also need a background image for your app. The size is specified on the Google Play Console</p>
<h4><span id="push-your-app-through-the-testing-stages-and-wait-for-review">Push your app through the testing stages and wait for review</span></h4>
<p><strong>YOUR APP SETTINGS</strong>: can always be found in the <strong>Main Store Listing</strong> in the left tab of your Dashboard</p>
<img src="/Dashboard-App/google2.png">
<p><strong>COMPLETE YOUR APP CONTENT PAGE</strong>: this page is super important because it has many policies related to ads, privacy policy and etc… This can be found here:</p>
<img src="/Dashboard-App/google3.png">
<p>Your app will be reviewed by the Google Team and will be published in 2-3 days.</p>
<h2><span id="thank-you-for-reading-this-post-i-hope-this-post-provided-you-with-some-insights-on-how-to-build-and-deploy-a-mobile-application-see-you-guys-again-in-the-next-post">Thank you for reading this post. I hope this post provided you with some insights on how to build and deploy a mobile application. See you guys again in the next post !</span></h2>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/MyProject/" data-toggle="tooltip" data-placement="top" title="My Projects">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/MessengerClone/" data-toggle="tooltip" data-placement="top" title="Post#7 Messenger Clone - Realtime Messaging Platform with Firebase">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <!-- duoshuo Share start -->
                

                

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Introductions</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">Introductions of the app</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">What technologies did I use?</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Frontend</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">Side Screens</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">Explaining Navigation v5 of React Native</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.1.1.</span> <span class="toc-nav-text">Quick Tip: How to customize the screen header</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">Building Welcome and Login/Signup Screen</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">Building Account Screen</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">Explaining the core feature: Location Tracking</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">Updating time continuously</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">Create a Location context to handle recording new tracks</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">Foreground Location</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">Background Location</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">Displaying it on a Map</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.6.</span> <span class="toc-nav-text">Pin a location</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.7.</span> <span class="toc-nav-text">Customize a Track after saving</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">3.8.</span> <span class="toc-nav-text">Posting it to Feed</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">Backend</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">Setting up Express and some libraries</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">Explaining the routes</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">Explaining MongoDB Schema</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.3.1.</span> <span class="toc-nav-text">The user schema:</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.3.2.</span> <span class="toc-nav-text">The Track Schema</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.4.</span> <span class="toc-nav-text">The Post Schema</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">4.5.</span> <span class="toc-nav-text">Host server on Google App Engine</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">Testing and Deploying to App Store and Google Play Store</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">Deploying an Expo App to App Store</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.1.</span> <span class="toc-nav-text">Setting up app.json file</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.2.</span> <span class="toc-nav-text">Testing your app on Simulator and Custom Expo Go</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.3.</span> <span class="toc-nav-text">Build the app for IOS using the archive</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.4.</span> <span class="toc-nav-text">Register for Apple Development Program through Apple Developer App</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.5.</span> <span class="toc-nav-text">Create an app on App Store Connect</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.6.</span> <span class="toc-nav-text">Prepare screenshots and video records of your Application</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.7.</span> <span class="toc-nav-text">Test your app on TestFlight</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.1.8.</span> <span class="toc-nav-text">Submit your app for review and wait for approval</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">Deploying an Expo App to Google Play Store</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.1.</span> <span class="toc-nav-text">Setting up app.json file</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.2.</span> <span class="toc-nav-text">Testing your app on Android Emulator</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.3.</span> <span class="toc-nav-text">Register for Google Play Developer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.4.</span> <span class="toc-nav-text">Build the .apk or .aab file for Android</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.5.</span> <span class="toc-nav-text">Testing in Google Play Console</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.6.</span> <span class="toc-nav-text">Prepare screenshots and images of your Application</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">5.2.7.</span> <span class="toc-nav-text">Push your app through the testing stages and wait for review</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#null"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">Thank you for reading this post. I hope this post provided you with some insights on how to build and deploy a mobile application. See you guys again in the next post !</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#javascript" title="javascript">javascript</a>
                        
                          <a class="tag" href="/tags/#nodejs" title="nodejs">nodejs</a>
                        
                          <a class="tag" href="/tags/#api" title="api">api</a>
                        
                          <a class="tag" href="/tags/#react-native" title="react-native">react-native</a>
                        
                          <a class="tag" href="/tags/#expo" title="expo">expo</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>







<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
        //   icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                

                
                    <li>
                        <a target="_blank" href="https://instagram.com/quang.sot.1412">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/quang.sot.1412">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Quang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Quang Nguyen 2021 
                    <br>
                    Created by <a href="https://www.facebook.com/quang.sot.1412">Quang</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    from <a href="https://github.com/">MrSnoo</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=QUANG&repo=CodeBlog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://decodecraft.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<img src="https://decodecraft.com/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
